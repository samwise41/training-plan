<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>Athlete Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üö≤</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown-dark.min.css">
    
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="min-h-screen">

    <div id="security-curtain" class="fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="bg-slate-800 border border-slate-700 p-8 rounded-2xl shadow-2xl max-w-sm w-full text-center mx-4">
            <div class="text-4xl mb-4">üîí</div>
            <h2 class="text-xl font-bold text-white mb-2">Restricted Access</h2>
            <p class="text-sm text-slate-400 mb-6">Enter access code to view dashboard.</p>
            
            <input type="password" id="access-code" placeholder="Enter Code" 
                   class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-white mb-4 focus:outline-none focus:border-blue-500 text-center tracking-widest placeholder-slate-600 transition-colors">
            
            <button id="btn-unlock" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition-colors shadow-lg hover:shadow-blue-500/20">
                Unlock Dashboard
            </button>
            <p id="access-error" class="text-red-400 text-xs mt-4 hidden font-bold"><i class="fa-solid fa-circle-exclamation mr-1"></i> Incorrect code</p>
        </div>
    </div>

    <script>
        (function() {
            // Check cookie immediately. If found, hide curtain BEFORE the page paints.
            if (document.cookie.split(';').some((item) => item.trim().startsWith('dashboard_access=true'))) {
                var curtain = document.getElementById('security-curtain');
                if (curtain) curtain.style.display = 'none';
            }
        })();
    </script>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 hidden z-50"></div>

    <aside id="sidebar" class="fixed top-0 left-0 h-full w-[260px] bg-slate-900 border-r border-slate-800 sidebar-closed lg:sidebar-open flex flex-col">
        <div class="p-6 border-b border-slate-800 flex justify-between items-center">
            <span class="font-bold tracking-widest text-slate-400 text-xs uppercase">Navigation</span>
            <button id="btn-sidebar-close" class="lg:hidden text-slate-400">
                <i class="fa-solid fa-xmark text-lg"></i>
            </button>
        </div>
        
        <nav class="flex-1 py-4">
            <button id="nav-schedule" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-calendar-week w-5 text-center"></i> Weekly Schedule
            </button>
            
            <button id="nav-gear" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-shirt w-5 text-center"></i> Gear Choice
            </button>

            <button id="nav-kpi" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-chart-pie w-5 text-center"></i> KPIs
            </button>

            <button id="nav-zones" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-gauge-high w-5 text-center"></i> Zones
            </button>

            <button id="nav-phases" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-layer-group w-5 text-center"></i> Phases
            </button>

            <button id="nav-history" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-clock-rotate-left w-5 text-center"></i> Training History
            </button>

            <button id="nav-full" class="nav-link w-full text-left px-6 py-4 text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/50 transition-colors flex items-center gap-3">
                <i class="fa-solid fa-book-open w-5 text-center"></i> Full Plan
            </button>
        </nav>
    </aside>

    <header class="bg-slate-900 border-b border-slate-800 sticky top-0 z-40 h-16 lg:h-20 flex items-center justify-between px-4 lg:px-8 lg:ml-[260px]">
        <div class="flex items-center">
            <button id="btn-sidebar-open" class="lg:hidden p-2 text-slate-400 hover:text-white focus:outline-none">
                <i class="fa-solid fa-bars text-xl"></i>
            </button>
            <div class="ml-2 lg:ml-0">
                <h1 class="text-lg lg:text-xl font-bold text-white tracking-tight" id="header-title-dynamic">Weekly Schedule</h1>
                <p class="hidden lg:block text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-0.5">Athlete Performance Suite</p>
            </div>
        </div>

        <div class="flex items-center gap-4">
            <div id="weather-widget" class="flex items-center gap-3">
                <div class="text-right block"> 
                    <p id="weather-location" class="text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none mb-1 hidden sm:block">Local Weather</p> 
                    <p id="weather-info" class="text-xs font-semibold text-slate-300 leading-none">Fetching...</p>
                </div>
                <div id="weather-icon-top" class="text-xl lg:text-2xl filter drop-shadow-sm">‚òÅÔ∏è</div>
            </div>
        </div>
    </header>

    <div class="main-content">
        <main class="max-w-5xl mx-auto px-4 py-8 lg:py-12 pb-20">
            <div id="content" class="markdown-body opacity-0 transition-opacity duration-500"></div>
        </main>
    </div>

    <script type="module" src="js/app.js"></script>

</body>
</html>
